@model Capstone.Web.Models.Table

@{
    ViewBag.Title = "Table";
    Layout = "~/Views/Shared/_Layout.cshtml";
    <script src="/Scripts/HandSetupJavaScript.js"></script>
}

<section>
    <h2>@Model.Name</h2>

    <div id="otherPlayersFields">
        @foreach (var seat in Model.Seats)
        {
            if (seat.Username.ToLower() != Session["username"].ToString().ToLower())
            {
                <div>

                    @if (seat.Occupied && seat.IsTurn)
                    {
                        <p id="currentPlayer">@seat.Username</p>
                    }
                    else
                    {
                        <p>@seat.Username</p>
                    }
                    <p>@seat.TableBalance.ToString("C")</p>
                </div>
            }
        }
    </div>

    @using (Html.BeginForm("updatePlayerTurn", "Game", FormMethod.Post)) //updatePlayerTurn
    {
        for (int i = 0; i < Model.Seats.Count; i++)
        {
            if (Model.Seats[i].Username.ToLower() == Session["username"].ToString().ToLower())
            {
                <div id="currentUserPlayField">
                    @if (Model.Seats[i].Occupied && Model.Seats[i].IsTurn)
                    {
                        <p id="currentPlayer">@Model.Seats[i].Username</p>
                    }
                    else
                    {
                        <p>@Model.Seats[i].Username</p>
                    }
                    <p>@Model.Seats[i].TableBalance.ToString("C")</p>


                    @for (int j = 0; j < 5; j++)
                    {

                        if (Model.Seats[i].Hand.MyHand[j].Suit == "diamonds" || Model.Seats[i].Hand.MyHand[j].Suit == "hearts")
                        {
                            <div class="playingCard red">
                                @*@Html.Hidden("isDiscard", card.Discard, new { @class = "shouldDiscard" })*@
                                @Html.HiddenFor(c => c.Seats[i].Hand.MyHand[j].Discard, new { @class = "shouldDiscard" })
                                <p>@Model.Seats[i].Hand.MyHand[j].ConvertedNumber @Model.Seats[i].Hand.MyHand[j].SuitLetter</p>
                            </div>
                        }
                        else
                        {
                            <div class="playingCard black">
                                @*@Html.Hidden("isDiscard", Model.Seats[i].Hand.MyHand[j].Discard, new { @class = "shouldDiscard" })*@
                                @Html.HiddenFor(c => c.Seats[i].Hand.MyHand[j].Discard, new { @class = "shouldDiscard" })
                                <p>@Model.Seats[i].Hand.MyHand[j].ConvertedNumber @Model.Seats[i].Hand.MyHand[j].SuitLetter</p>
                            </div>
                        }


                    }
                    @if (Model.Seats[i].Occupied && Model.Seats[i].IsTurn)
                    {
                        <p>Gonna Do Stuff Here</p>
                    }
                </div>
            }
        }

        <button>Advance</button>

    }

    @using (Html.BeginForm("ReplaceCards", "Game", FormMethod.Post))
    {
        foreach (var seat in Model.Seats)
        {
            if (seat.Username == Session["username"].ToString())
            {

            }
        }

        <button>Discard</button>
    }
</section>

